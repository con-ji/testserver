var express = require('express');
var app = express();
var path = require('path');
var formidable = require('formidable');
var fs = require('fs');
var count = 0;

app.use(express.static(path.join(__dirname, 'public')));

app.get('/', function(req, res){
  res.sendFile(path.join(__dirname, 'views/index.html'));
});

app.post('/upload', function(req, res){

    // create an incoming form object
    var form = new formidable.IncomingForm();

    // specify that we don't want the user to upload multiple files in a single request
    form.multiples = false;

    // store all uploads in the /uploads directory
    form.uploadDir = path.join(__dirname, '/uploads');

    // every time a file has been uploaded successfully,
    // push it to the folder and name it

    form.on('file', function(field, file) {
        fs.rename(file.path, path.join(form.uploadDir, count + '.jpg'));
        var image64 = 'data:image/png;base64,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';
        var data = image64.replace(/^data:image\/\w+;base64,/, '');
        console.log(data)
        fs.writeFile(0, data, {encoding: 'base64'}, function(err){
          //Finished
        });
        count ++;
    });

    // log any errors that occur
    form.on('error', function(err) {
      console.log('An error has occured: \n' + err);
    });

    // once all the files have been uploaded, send a response to the client
    form.on('end', function() {
      res.end('success');
    });

    // parse the incoming request containing the form data
    form.parse(req);

});

var server = app.listen(80, function(){
  console.log('Server listening on port 80');
});
